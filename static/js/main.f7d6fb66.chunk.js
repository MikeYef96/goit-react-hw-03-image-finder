(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{14:function(e,t,a){e.exports={ImageGalleryItem:"ImageGalleryItem_ImageGalleryItem__1Lfxg",ImageGalleryItemImage:"ImageGalleryItem_ImageGalleryItemImage__3Re8f"}},15:function(e,t,a){e.exports={Overlay:"Modal_Overlay__VEdW5",Modal:"Modal_Modal__2Zt0K"}},27:function(e,t,a){e.exports={ImageGallery:"ImageGallery_ImageGallery__33cuZ"}},28:function(e,t,a){e.exports={Button:"Button_Button__1OTPx"}},30:function(e,t,a){e.exports={Loader:"CustomLoader_Loader__1mbeB"}},31:function(e,t,a){},38:function(e,t,a){},8:function(e,t,a){e.exports={Searchbar:"Searchbar_Searchbar__33k-G",SearchForm:"Searchbar_SearchForm__37PTr",SearchFormButton:"Searchbar_SearchFormButton__1HJnz",SearchFormButtonLabel:"Searchbar_SearchFormButtonLabel__2uSNC",SearchFormInput:"Searchbar_SearchFormInput__14LgI"}},80:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a(25),o=a.n(r),s=(a(38),a(12)),c=a.n(s),i=a(16),l=a(26),u=a(33),m=a(4),d=a(5),h=a(7),p=a(6),g=a(13),b=a.n(g);b.a.defaults.baseURL="https://pixabay.com/api";var j=function(e,t){return b.a.get("/?q=".concat(e,"&page=").concat(t,"&key=").concat("20134869-f642f32873dada644aca7b373","&image_type=photo&orientation=horizontal&per_page=12"))},f=a(32),y=a(14),O=a.n(y),v=a(0);function x(e){var t=e.id,a=e.src,n=e.alt,r=e.onOpenModal;return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)("li",{onClick:r,className:O.a.ImageGalleryItem,children:Object(v.jsx)("img",{id:t,src:a,alt:n,className:O.a.ImageGalleryItemImage})},t)})}var S=a(15),I=a.n(S);function _(e){var t=e.onCloseModal,a=e.modalImages,n=e.handleKeyPress;return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)("div",{onClick:function(e){"IMG"!==e.target.nodeName&&t()},className:I.a.Overlay,children:Object(v.jsx)("div",{className:I.a.Modal,onClick:n,children:Object(v.jsx)("img",{src:a.largeImageURL,alt:""})})})})}var k=a(27),N=a.n(k),C=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isModalOpen:!1,modalImages:[]},e.handleKeyPress=function(t){"Escape"===t.code&&e.onCloseModal()},e.handleBackdropClick=function(t){Number(t.target.id)===Number(e.state.modalImages.id)&&e.onCloseModal()},e.onOpenModal=function(t){var a=e.props.images.filter((function(e){return e.id===Number(t.target.id)})),n=Object(f.a)(a,1)[0];e.setState({isModalOpen:!0,modalImages:n})},e.onCloseModal=function(){e.setState({isModalOpen:!1})},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyPress)}},{key:"componentDidUpdate",value:function(){this.state.isModalOpen?window.removeEventListener("keydown",this.handleKeyPress):window.addEventListener("keydown",this.handleKeyPress)}},{key:"render",value:function(){var e=this,t=this.props.images,a=this.state,n=a.isModalOpen,r=a.modalImages;return Object(v.jsxs)(v.Fragment,{children:[n&&Object(v.jsx)(_,{modalImages:r,onCloseModal:this.onCloseModal,handleKeyPress:this.handleKeyPress}),Object(v.jsx)("ul",{className:N.a.ImageGallery,children:t.map((function(t){return Object(v.jsx)(x,{handleBackdropClick:e.handleBackdropClick,alt:t.tags,src:t.webformatURL,id:t.id,onOpenModal:e.onOpenModal},t.id)}))})]})}}]),a}(n.Component),w=a(28),M=a.n(w);function L(e){var t=e.handleClickButton;return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)("button",{onClick:t,className:M.a.Button,children:"Load more"})})}var B=a(8),F=a.n(B),G=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={searchQuery:""},e.handleChange=function(t){e.setState({searchQuery:t.target.value})},e.handleSubmit=function(t){t.preventDefault(),e.props.onSubmit(e.state.searchQuery)},e.handleClickButton=function(){e.props.onSubmit(e.state.searchQuery,e.props.pageNumber)},e}return Object(d.a)(a,[{key:"componentDidUpdate",value:function(e,t){e.pageNumber>2&&window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})}},{key:"render",value:function(){var e=this.state.searchQuery,t=this.props,a=t.images,n=t.updateQuery;return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("header",{className:F.a.Searchbar,children:Object(v.jsxs)("form",{onSubmit:this.handleSubmit,className:F.a.SearchForm,children:[Object(v.jsx)("button",{type:"submit",className:F.a.SearchFormButton,children:Object(v.jsx)("span",{className:F.a.SearchFormButtonLabel,children:"Search"})}),Object(v.jsx)("input",{className:F.a.SearchFormInput,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",value:e,onChange:this.handleChange,onClick:function(){n(e)}})]})}),a.length>0&&Object(v.jsx)(C,{images:a}),a.length>11&&Object(v.jsx)(L,{handleClickButton:this.handleClickButton})]})}}]),a}(n.Component);function P(e){var t=e.text;return Object(v.jsxs)("h2",{children:["Woooooops! Somethink went wrong: ",t,"!"]})}a(59);var Q=a(29),K=a.n(Q),q=a(30),E=a.n(q);function D(){return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(K.a,{className:E.a.Loader,type:"ThreeDots",color:"#3f51b5",height:300,width:300,timeout:5e3})})}var U=a(31),A=a.n(U),R={images:[],isLoading:!1,error:null,pageNumber:1,query:""},T=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state=Object(u.a)({},R),e.updateQuery=function(t){e.setState({query:t})},e.getImages=function(){var t=Object(l.a)(c.a.mark((function t(a){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({isLoading:!0}),t.prev=1,t.next=4,j(a,e.state.pageNumber);case 4:n=t.sent,e.setState((function(e){return{images:[].concat(Object(i.a)(e.images),Object(i.a)(n.data.hits)),pageNumber:e.pageNumber+1}})),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),console.log(t.t0),e.setState({error:t.t0});case 12:return t.prev=12,e.setState({isLoading:!1}),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[1,8,12,15]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(d.a)(a,[{key:"componentDidUpdate",value:function(e,t){t.pageNumber===this.state.pageNumber&&t.query===this.state.query||(t.query!==this.state.query&&this.setState({images:[],pageNumber:1}),this.setState({isLoading:!0}))}},{key:"render",value:function(){var e=this.state,t=e.images,a=e.isLoading,n=e.error,r=e.pageNumber;return Object(v.jsxs)("div",{className:A.a.App,children:[Object(v.jsx)(G,{initialState:R,onSubmit:this.getImages,images:t,pageNumber:r,updateQuery:this.updateQuery}),n&&Object(v.jsx)(P,{text:n.message}),a&&Object(v.jsx)(D,{})]})}}]),a}(n.Component);o.a.render(Object(v.jsx)(T,{}),document.getElementById("root"))}},[[80,1,2]]]);
//# sourceMappingURL=main.f7d6fb66.chunk.js.map